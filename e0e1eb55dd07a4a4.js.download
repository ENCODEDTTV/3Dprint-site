(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92891,e=>{"use strict";e.s(["createFlexibleHtmlRegex",()=>n,"escapeRegExp",()=>l,"extractProjectName",()=>i,"pagesToFiles",()=>c,"processAiResponse",()=>s]);var t=e.i(65880);let l=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=e=>RegExp(l(e).replace(/\s+/g,"\\s*").replace(/>\s*</g,">\\s*<").replace(/\s*>/g,"\\s*>"),"g"),s=(e,l)=>{let s,c,i=[],a=[...l],h=RegExp("".concat(t.UPDATE_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([\\s\\S]*?)").concat(t.UPDATE_FILE_END.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([\\s\\S]*?)(?=").concat(t.UPDATE_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|").concat(t.NEW_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|$)"),"g");for(;null!==(s=h.exec(e));){let[,e,l]=s,c=e.trim(),h=a.findIndex(e=>e.path===c);if(-1!==h){let e=a[h].html,s=l,c=l.match(/```html\s*([\s\S]*?)\s*```/);c&&(s=c[1]);let p=0,r=!0;for(;r;){let l=s.indexOf(t.SEARCH_START,p);if(-1===l){r=!1;continue}let c=s.indexOf(t.DIVIDER,l);if(-1===c){r=!1;continue}let a=s.indexOf(t.REPLACE_END,c);if(-1===a){r=!1;continue}let h=s.substring(l+t.SEARCH_START.length,c),E=s.substring(c+t.DIVIDER.length,a);if(""===h.trim())e="".concat(E,"\n").concat(e),i.push([1,E.split("\n").length]);else{let t=n(h).exec(e);if(t){let l=t[0],n=e.substring(0,t.index).split("\n").length,s=n+E.split("\n").length-1;i.push([n,s]),e=e.replace(l,E)}}p=a+t.REPLACE_END.length}a[h].html=e}}let p=RegExp("".concat(t.NEW_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([\\s\\S]*?)").concat(t.NEW_FILE_END.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"([\\s\\S]*?)(?=").concat(t.UPDATE_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|").concat(t.NEW_FILE_START.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"|$)"),"g");for(;null!==(c=p.exec(e));){let[,e,t]=c,l=e.trim(),n=t,s=t.match(/```html\s*([\s\S]*?)\s*```/),i=t.match(/```css\s*([\s\S]*?)\s*```/),h=t.match(/```javascript\s*([\s\S]*?)\s*```/);s?n=s[1]:i?n=i[1]:h&&(n=h[1]);let p=a.findIndex(e=>e.path===l);-1!==p?a[p]={path:l,html:n.trim()}:a.push({path:l,html:n.trim()})}if(a.length===l.length&&!e.includes(t.UPDATE_FILE_START)){var r;let l=0,s=!0,c=(null==(r=a[0])?void 0:r.html)||"";for(;s;){let a=e.indexOf(t.SEARCH_START,l);if(-1===a){s=!1;continue}let h=e.indexOf(t.DIVIDER,a);if(-1===h){s=!1;continue}let p=e.indexOf(t.REPLACE_END,h);if(-1===p){s=!1;continue}let r=e.substring(a+t.SEARCH_START.length,h),E=e.substring(h+t.DIVIDER.length,p);if(""===r.trim())c="".concat(E,"\n").concat(c),i.push([1,E.split("\n").length]);else{let e=n(r).exec(c);if(e){let t=e[0],l=c.substring(0,e.index).split("\n").length,n=l+E.split("\n").length-1;i.push([l,n]),c=c.replace(t,E)}}l=p+t.REPLACE_END.length}let h=a.findIndex(e=>"/"===e.path||"/index"===e.path||"index"===e.path);-1!==h&&(a[h].html=c)}return{updatedPages:a,updatedLines:i}},c=e=>{let t=[];return e.forEach(e=>{let l="text/html";e.path.endsWith(".css")?l="text/css":e.path.endsWith(".js")?l="text/javascript":e.path.endsWith(".json")&&(l="application/json");let n=new File([e.html],e.path,{type:l});t.push(n)}),t},i=e=>{var t,l;return(null==(l=e.match(/<<<<<<< PROJECT_NAME_START\s*([\s\S]*?)\s*>>>>>>> PROJECT_NAME_END/))||null==(t=l[1])?void 0:t.trim())||null}}]);